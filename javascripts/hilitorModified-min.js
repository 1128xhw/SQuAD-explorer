window.Hilitor=function(e,t){var r=e||document.body,n=t||"EM",o=new RegExp("^(?:"+n+"|SCRIPT|FORM|SPAN)$"),i=["rgba(100, 190, 200, 0.3)","rgba(90, 150, 200, 0.3)","rgba(30, 200, 200, 0.3)","rgba(140, 230, 230, 0.3)"],l=[],s=0,a="";this.setRegex=function(e,t){if(t||(e=e.replace(/^[^\w]+|[^\w]+$/g,""),e=e.replace(/[^\w'-]+/g,"|"),e=e.replace(/^\||\|$/g,"")),e){var r="("+e+")";return a=new RegExp(r,"i"),!0}return!1},this.getRegex=function(){var e=a.toString();return e=e.replace(/(^\/(\\b)?|\(|\)|(\\b)?\/i$)/g,""),e=e.replace(/\|/g," ")},this.hiliteWords=function(e,t,r){if(void 0!==e&&e&&a&&!o.test(e.nodeName)){if(e.hasChildNodes())for(var d=0;d<e.childNodes.length;d++)this.hiliteWords(e.childNodes[d],t,r);if(3===e.nodeType&&(nv=e.nodeValue)&&(regs=a.exec(nv))){l[regs[0].toLowerCase()]||(l[regs[0].toLowerCase()]=r||i[s++%i.length]);var g=document.createElement(n);g.appendChild(document.createTextNode(regs[0])),g.style.backgroundColor=t?r:l[regs[0].toLowerCase()],g.style.fontStyle="inherit",g.style.color="#000",t&&(g.style.textDecoration="underline");var c=e.splitText(regs.index);c.nodeValue=c.nodeValue.substring(regs[0].length),e.parentNode.insertBefore(g,c)}}},this.remove=function(){for(var e=document.getElementsByTagName(n);e.length&&(el=e[0]);){var t=el.parentNode;t.replaceChild(el.firstChild,el),t.normalize()}},this.apply=function(e,t,n){void 0!==e&&e&&this.setRegex(e,t)&&this.hiliteWords(r,t,n)}};
function normalize_answer(r){return function(r){return r.replace(/\s\s+/g," ").trim()}(function(r){return r.replace(/\b(a|an|the)\b/g," ")}(function(r){return r.toLowerCase(r)}(function(r){return r.replace(/[.^\/|#*(-=>:;?{&<[!'_+`)@$\]"~\\%},]/g,"")}(r))))}function compute_common(r,n){function e(r){var n={};return r.forEach(function(r){n[r]||(n[r]=0),n[r]+=1}),n}var t=e(r),o=e(n),a={};for(var u in t)if(o[u]){var c=Math.min(t[u],o[u]);a[u]=c}return a}function f1_score(r,n){var e=normalize_answer(r).split(" "),t=normalize_answer(n).split(" "),o=compute_common(e,t),a=Object.keys(o).map(function(r){return o[r]}).reduce(function(r,n){return r+n},0);if(0===a)return 0;var u=1*a/e.length,c=1*a/t.length;return 2*u*c/(u+c)}function exact_match_score(r,n){return normalize_answer(r)===normalize_answer(n)}function metric_max_over_ground_truths(r,n,e){for(var t=[],o=0;o<e.length;o++){var a=r(n,e[o]);t.push(a)}return Math.max.apply(null,t)}function evaluate_on_metrics(r,n){return[metric_max_over_ground_truths(exact_match_score,r,n),metric_max_over_ground_truths(f1_score,r,n)]}window.evaluate_on_metrics=evaluate_on_metrics;